---
title: "Googlestore2"
author: "Aria"
date: "12/4/2020"
output: html_document
---



# (KDD1) 數據取得 (-->X)
```{r, echo=FALSE, warning=FALSE}
library(data.table)
library(pander);   library(knitr);      library(kableExtra)
library(readxl)
X =as.data.frame(read_excel('/Users/juck30808/Documents/Github/USC_R_Git/2.R-tech/data/googleplaystore4_(7000).xlsX'))
pander(paste0(">> (1) APP數據(X): 共 ",dim(X)[1],"筆紀錄\n\n")); 
pander(">> (2) Googlestore APP數據樣貌為: "); 
kable(head(X,4)) %>%
  kable_styling(c("striped", "bordered")) %>% kable_styling(full_width = F) %>% column_spec(1, bold = T)
```

## (KDD2) APP基本基料探索 (X)
```{r, echo=FALSE, warning=FALSE}

```


## (KDD3) 數據轉換(X.group)
```{r, echo=FALSE, warning=FALSE}
pander(">> Googlestore APP,選擇Rating,Reviews,Installs 作為參考值，並切為20個類別: "); 
X.hc = hclust( dist( X[,c("Rating","Reviews","Installs")] ),method="ward.D")
X.group = cutree(X.hc, k=20)
#table(X.group)
kable(table(X.group)) %>%
  kable_styling(c("striped", "bordered")) %>% kable_styling(full_width = F) %>% column_spec(1, bold = T)
```

## (KDD5) 數據解讀(X.group)
```{r, echo=FALSE, warning=FALSE}

pander(">> (1)20個類別總覽:平均值 "); 
Ncls = 20
Gmean = NULL
for (kk in 1:Ncls) {
  indKK = which(X.group==kk);   indKK
  c(kk,length(indKK), apply(X[indKK,c("Rating","Reviews","Installs")], 2, mean))
  Gmean = rbind(Gmean, c(kk,length(indKK), apply(X[indKK,c("Rating","Reviews","Installs")], 2, mean)))  
}
kable(round(Gmean,0)[order(Gmean[,2],decreasing=T),])%>%
  kable_styling(c("striped", "bordered")) %>% kable_styling(full_width = F) %>% column_spec(1, bold = T)
```

```{r, echo=FALSE, warning=FALSE}
pander(">> (1)轉換成Gfeature  "); 
Gfeature=NULL
for (k in 1:dim(Gmean)[1]) {
  AA = paste0(round(Gmean[k,3:5],2), "*", colnames(Gmean)[3:5]);  AA
  BB = paste( AA, collapse="+")
  print(BB)
  Gfeature[k]=BB
}
#Gfeature

pander(">> (2)轉換成Gfeature 數據框  "); 
Gm =as.data.frame(Gmean); #head(Gm,2)
colnames(Gm)[1:2] = c("id","count");   #head(Gm,2)
Gm$feature = Gfeature

kable(head(Gm,20))%>%
  kable_styling(c("striped", "bordered")) %>% kable_styling(full_width = F) %>% column_spec(1, bold = T)

#write.csv(Gm,"Gm.csv")

```



## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(Gmean)

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
