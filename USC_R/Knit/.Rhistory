install.packages(c("pander","kableExtra","prettydoc"))
#####===== (A1).整合開發分析平台 (RStudio)--分成四區: =====#####
#-- (A)程式編輯區 (左上區)
#-- (B)指令執行區(左下區): 請用Shift-Dn指令標記7-9行後，用Ctrl-Enter將這三行送到指令執行區執行
x = 1:10
x               #-- (C)變量顯示區(右上角): 可以看到 x 變量:  #-- [1]  1  2  3  4  5  6  7  8  9 10
plot(x,x*x)     #-- (D)繪圖與求助區(右下角): 可以看到 x 對 x*x 的繪圖
#####===== (A2).數據分析程式語言 (R)  =====#####
3+2
X = 3+2
X
Y = X+5
Y
#####===== (A4).R程式的工作目錄 =====#####
##==> 任何數據分析編程的第一件事：設定工作目錄(Working Directory)
setwd("/Users/juck30808/Google/Course/DataScience/USC_Python_git/R")   ##--所有R程式的第一行，用來設定工作目錄／數據目錄等
#####===== (A4).R程式的工作目錄 =====#####
##==> 任何數據分析編程的第一件事：設定工作目錄(Working Directory)
setwd("/Users/juck30808/Google/Course/DataScience_R/USC_R/Rdata01.R")   ##--所有R程式的第一行，用來設定工作目錄／數據目錄等
#== (1)RStudio環境中，可以同時開啟多個程式
# -- 每個程式，隨時保持儲存
# -- 讓每個程式，只要從第一行開始重新執行，即可獲得同樣的結果
# -- 每一計畫 (project) 存於一目錄
#== (2) 井字號# 代表註解(comment): 其後的指令(敘述)不執行，可分為檔首註解，段落註解，行尾註解
# -- 編程檔 (.R) 的註解：有三種--
#   -- (A) 檔首註解：註明整個程式的 (1)程式名稱、(2)程式目的、(*)調用方式、(3)作者，(4)日期
#   -- (B) 分段註解：指示數據分析的步驟(請參考數據分析步驟說明) ，五個井號(#####)可有段落收縮
#   -- (C) 行尾註解：在適當的地方，註解此行說明，或 執行結果 (通常 加 #-- 識別)
#== (3) 在R中，大小寫是不同的，試輸入 x 與 X，觀察他們的值
x   #-- [1]  1  2  3  4  5  6  7  8  9 10
X   #-- [1]  5
#== (4) 一行中可以有多個指令，以分號;分隔，如 第15,17行可以寫成
X = 3+2;   Y = X+5
#####===== (B1).數據擷取 (KDD1, read.csv) =====#####
X = read.csv("XXX2.csv")
X
#####===== (B2).數據框的架構 (KDD2, dim, head): 以下二指令是檢視數據框架構，最基本也最重要的指令 =====#####
dim(X)     #dimension (維度)84008列11行 (84008筆交易記錄,各有11個欄位)
head(X,2)  #會顯示前2筆記錄
#####===== (B3).數據探索 (KDD2, X$欄位, unique, length) =====#####
X$customer     #-- 數據框的欄位，可以錢號$ 來取用，得到的是一個變量 (向量)
X$customer
#####===== (B3).數據探索 (KDD2, X$欄位, unique, length) =====#####
X$customer     #-- 數據框的欄位，可以錢號$ 來取用，得到的是一個變量 (向量)
unique(X$customer)          #-- unique(欄位): 用來找出該欄位的種類
length(unique(X$customer))  #-- length(長度): 顯示向量(此處是變量的相異值-unique)的長度   #-- [1] 7774 --> 有 7774位客戶
length(unique(X$product))   #-- 有 9013件商品
#####===== (B4).數據框中的元素索引 (X[i,j]) =====#####
X$customer[2]     #(1) 取用第k個元素
X[2,3]            #(2) X[2,3] 是取用X數據框中(c2)
X[2,]             #(3) 不指定時，就是所有行
X[,3]             #(4) 不指定時，就是所有列
#####===== (B5).基本數據轉換與數據探索 (KDD2/KDD3, range, as.--) =====#####
X$amount[1:10]    #amount 表頭 1:10
range(X$amount)   #range() 變量的範圍(最小值與最大值)
X$datetime[1:5]   #以字串(character)型態儲存，並編碼為 83827層級(levels)
X$date = as.Date(X$datetime,format="%Y-%m-%d")  #-- as.--() 是萬用數據轉換函式，此處是將字串型態 轉為 日期型態
range(X$date)         #-- [1] "2015-01-01" "2017-12-31"
#####===== (B7).數據轉換: 連續值切分離散區間 (KDD3, cut) =====#####
range(X$price)    #-- [1] 0 8280
#####===== (B7).數據轉換: 連續值切分離散區間 (KDD3, cut) =====#####
range(X$price)    #-- [1] 0 8280
breaks = c(-0.001,0,99,999,9999) #定義"贈品","數十元品","百元品","千元品" 價值區間
#####===== (F2).日期標籤 ($season, $weekdays, $week) =====#####
##== (1) year:
substr(Cv$D0[901:910],1,4)   #--  [1] "2015" "2015" "2015" "2015" "2015" "2015" "2015" "2015" "2015" "2015"
wkDir = "C:/Users/jsheh/Desktop/working/USC/AIbda/";   setwd(wkDir)
