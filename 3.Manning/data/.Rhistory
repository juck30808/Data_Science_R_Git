custdata <- read.table('custdata.tsv',
header=TRUE,sep='\t')
# example 3.1 of section 3.1
# (example 3.1 of section 3.1)  : Exploring data : Using summary statistics to spot problems
# Title: The summary() command
custdata <- read.table('custdata.tsv',
header=TRUE,sep='\t')
# example 3.1 of section 3.1
# (example 3.1 of section 3.1)  : Exploring data : Using summary statistics to spot problems
# Title: The summary() command
setwd("/Users/juck30808/Documents/Github/USC_R_Git/3.Manning/data")
custdata <- read.table('custdata.tsv',
header=TRUE,sep='\t')
summary(custdata)
custdata <- read.table('custdata.tsv',
header=TRUE,sep='\t')
summary(custdata)
summary(custdata$income)
# example 3.4 of section 3.1.1
# (example 3.4 of section 3.1.1)  : Exploring data : Using summary statistics to spot problems : Typical problems revealed by data summaries
# Title: Looking at the data range of a variable
summary(custdata$income)
Income = custdata$income/1000
Income = custdata$income/1000
summary(Income)                                	# Note: 1
summary(Income)                                	# Note: 1
library(ggplot2)     	# Note: 1
# example 3.6 of section 3.2.1
# (example 3.6 of section 3.2.1)  : Exploring data : Spotting problems using graphics and visualization : Visually checking distributions for a single variable
# Title: Plotting a histogram
library(ggplot2)     	# Note: 1
ggplot(custdata) +
geom_histogram(aes(x=age),
binwidth=5, fill="gray") 	# Note: 2
library(scales) 	# Note: 1
ggplot(custdata) + geom_density(aes(x=income)) +
scale_x_continuous(labels=dollar) 	# Note: 2
ggplot(custdata) + geom_density(aes(x=income)) +
scale_x_log10(breaks=c(100,1000,10000,100000), labels=dollar) +  	# Note: 1
annotation_logticks(sides="bt")  	# Note: 2
ggplot(custdata) + geom_bar(aes(x=marital.stat), fill="gray")
ggplot(custdata) +
geom_bar(aes(x=state.of.res), fill="gray") +  	# Note: 1
coord_flip() + 	# Note: 2
theme(axis.text.y=element_text(size=rel(0.8)))  	# Note: 3
statesums <- table(custdata$state.of.res) 	# Note: 1
statef <- as.data.frame(statesums) 	# Note: 2
colnames(statef)<-c("state.of.res", "count") 	# Note: 3
summary(statef)  	# Note: 4
## state.of.res     count
## Alabama   : 1    Min.   :  1.00
## Alaska    : 1    1st Qu.:  5.00
## Arizona   : 1    Median : 12.00
## Arkansas  : 1    Mean   : 20.00
## California: 1    3rd Qu.: 26.25
## Colorado  : 1    Max.   :100.00
## (Other)   :44
statef <- transform(statef,
state.of.res=reorder(state.of.res, count)) 	# Note: 5
summary(statef)                       	# Note: 6
## state.of.res     count
## Delaware    : 1    Min.   :  1.00
## North Dakota: 1    1st Qu.:  5.00
## Wyoming     : 1    Median : 12.00
## Rhode Island: 1    Mean   : 20.00
## Alaska      : 1    3rd Qu.: 26.25
## Montana     : 1    Max.   :100.00
## (Other)     :44
ggplot(statef)+ geom_bar(aes(x=state.of.res,y=count),
stat="identity",              	# Note: 7
fill="gray") +
coord_flip() +                                       	# Note: 8
theme(axis.text.y=element_text(size=rel(0.8)))
x <- runif(100)   	# Note: 1
y <- x^2 + 0.2*x   	# Note: 2
ggplot(data.frame(x=x,y=y), aes(x=x,y=y)) + geom_line()  	# Note: 3
custdata2 <- subset(custdata,
(custdata$age > 0 & custdata$age < 100
& custdata$income > 0))                  	# Note: 1
cor(custdata2$age, custdata2$income) 	# Note: 2
ggplot(custdata2, aes(x=age, y=income)) +
geom_point() + ylim(0, 200000)
ggplot(custdata2, aes(x=age, y=income)) + geom_point() +
stat_smooth(method="lm") +
ylim(0, 200000)
ggplot(custdata2, aes(x=age, y=income)) +
geom_point() + geom_smooth() +
ylim(0, 200000)
ggplot(custdata2, aes(x=age, y=as.numeric(health.ins))) + 	# Note: 1
geom_point(position=position_jitter(w=0.05, h=0.05)) +  	# Note: 2
geom_smooth() 	# Note: 3
# example 3.1 of section 3.1
# (example 3.1 of section 3.1)  : Exploring data : Using summary statistics to spot problems
# Title: The summary() command
setwd("/Users/juck30808/Documents/Github/USC_R_Git/3.Manning/data")
custdata <- read.table('custdata.tsv',
header=TRUE,sep='\t')
summary(custdata)
# example 3.1 of section 3.1
# (example 3.1 of section 3.1)  : Exploring data : Using summary statistics to spot problems
# Title: The summary() command
setwd("/Users/juck30808/Documents/Github/USC_R_Git/3.Manning/data")
custdata <- read.table('custdata.tsv',header=TRUE,sep='\t')
summary(custdata)
# example 3.6 of section 3.2.1
# (example 3.6 of section 3.2.1)  : Exploring data : Spotting problems using graphics and visualization : Visually checking distributions for a single variable
# Title: Plotting a histogram
library(ggplot2)
ggplot(custdata) +
geom_histogram(aes(x=age),
binwidth=5, fill="gray")
ggplot(custdata) + geom_histogram(aes(x=age),
binwidth=5, fill="gray")
# example 3.6 of section 3.2.1
# (example 3.6 of section 3.2.1)  : Exploring data : Spotting problems using graphics and visualization : Visually checking distributions for a single variable
# Title: Plotting a histogram
library(ggplot2)
ggplot(custdata) + geom_histogram(aes(x=age),binwidth=5, fill="gray")
# example 3.7 of section 3.2.1
# (example 3.7 of section 3.2.1)  : Exploring data : Spotting problems using graphics and visualization : Visually checking distributions for a single variable
# Title: Producing a density plot
library(scales) 	# Note: 1 比例軟件包引入了美元比例符號。
ggplot(custdata) + geom_density(aes(x=income)) +
scale_x_continuous(labels=dollar) 	# Note: 2 將x軸標籤設置為美元。
# example 3.8 of section 3.2.1
# (example 3.8 of section 3.2.1)  : Exploring data : Spotting problems using graphics and visualization : Visually checking distributions for a single variable
# Title: Creating a log-scaled density plot
ggplot(custdata) + geom_density(aes(x=income)) +
scale_x_log10(breaks=c(100,1000,10000,100000), labels=dollar) +  	# Note: 1  將x軸設置為log10刻度，並手動將刻度點和標籤設置為美元。
annotation_logticks(sides="bt")  	# Note: 2在圖表的頂部和底部添加對數刻度刻度線。
# informalexample 3.2 of section 3.2.1
# (informalexample 3.2 of section 3.2.1)  : Exploring data : Spotting problems using graphics and visualization : Visually checking distributions for a single variable
ggplot(custdata) + geom_bar(aes(x=marital.stat), fill="gray")
# example 3.9 of section 3.2.1
# (example 3.9 of section 3.2.1)  : Exploring data : Spotting problems using graphics and visualization : Visually checking distributions for a single variable
# Title: Producing a horizontal bar chart
ggplot(custdata) +
geom_bar(aes(x=state.of.res), fill="gray") +  	# Note: 1
coord_flip() + 	# Note: 2
theme(axis.text.y=element_text(size=rel(0.8)))  	# Note: 3
